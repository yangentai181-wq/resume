<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>岩根大純 | パッションモンスター</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- ヘッダー -->
  <header class="header">
    <nav class="nav">
      <div class="nav-logo">
        <span class="nav-logo-name">岩根大純</span>
        <span class="nav-logo-sub">理不尽を、情熱と仕組みでハックする。</span>
      </div>
      <ul class="nav-links">
        <li><a href="#spec">基本仕様</a></li>
        <li><a href="#updates">これまでのアップデート</a></li>
        <li><a href="#features">搭載機能</a></li>
        <li><a href="#reviews">評価とレビュー</a></li>
        <li><a href="#next-good">岩根大純のNext Good</a></li>
        <li><a href="#chatbot">大純AIに聞く</a></li>
      </ul>
      <button class="nav-pdf-btn" onclick="window.print()">PDFをダウンロード<svg class="download-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg></button>
      <button class="hamburger" onclick="toggleMenu()" aria-label="メニュー">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </nav>
    <div class="mobile-menu" id="mobileMenu">
      <a href="#spec" onclick="closeMenu()">基本仕様</a>
      <a href="#updates" onclick="closeMenu()">これまでのアップデート</a>
      <a href="#features" onclick="closeMenu()">搭載機能</a>
      <a href="#reviews" onclick="closeMenu()">評価とレビュー</a>
      <a href="#next-good" onclick="closeMenu()">岩根大純のNext Good</a>
      <a href="#chatbot" onclick="closeMenu()">大純AIに聞く</a>
    </div>
  </header>

  <!-- ヒーローセクション -->
  <section class="hero">
    <div class="hero-content">
      <div class="hero-text">
        <h1 class="hero-title">パッションモンスター<br><span class="hero-name-wrapper"><span class="hero-name">岩根 大純</span><span class="hero-name-reading">Iwane Taijun</span></span></h1>
        <p class="hero-subtitle">理不尽を、<br>情熱と仕組みでハックする。</p>
        <!-- 実績バー -->
        <div class="credentials-inline">
          <div class="credential-item">
            <div class="credential-wreath">
              <svg class="wreath wreath-left" viewBox="0 0 30 70" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M25 5 Q5 35 25 65" stroke="#D4A84B" stroke-width="1.5" fill="none"/>
                <ellipse cx="20" cy="8" rx="5" ry="2.5" fill="#D4A84B" transform="rotate(60 20 8)"/>
                <ellipse cx="12" cy="18" rx="5" ry="2.5" fill="#D4A84B" transform="rotate(45 12 18)"/>
                <ellipse cx="8" cy="30" rx="5" ry="2.5" fill="#D4A84B" transform="rotate(20 8 30)"/>
                <ellipse cx="8" cy="42" rx="5" ry="2.5" fill="#D4A84B" transform="rotate(-20 8 42)"/>
                <ellipse cx="12" cy="54" rx="5" ry="2.5" fill="#D4A84B" transform="rotate(-45 12 54)"/>
                <ellipse cx="20" cy="63" rx="5" ry="2.5" fill="#D4A84B" transform="rotate(-60 20 63)"/>
              </svg>
              <div class="credential-content">
                <span class="credential-label">第55回松ヶ崎祭</span>
                <span class="credential-value">実行委員長</span>
              </div>
              <svg class="wreath wreath-right" viewBox="0 0 30 70" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M5 5 Q25 35 5 65" stroke="#D4A84B" stroke-width="1.5" fill="none"/>
                <ellipse cx="10" cy="8" rx="5" ry="2.5" fill="#D4A84B" transform="rotate(-60 10 8)"/>
                <ellipse cx="18" cy="18" rx="5" ry="2.5" fill="#D4A84B" transform="rotate(-45 18 18)"/>
                <ellipse cx="22" cy="30" rx="5" ry="2.5" fill="#D4A84B" transform="rotate(-20 22 30)"/>
                <ellipse cx="22" cy="42" rx="5" ry="2.5" fill="#D4A84B" transform="rotate(20 22 42)"/>
                <ellipse cx="18" cy="54" rx="5" ry="2.5" fill="#D4A84B" transform="rotate(45 18 54)"/>
                <ellipse cx="10" cy="63" rx="5" ry="2.5" fill="#D4A84B" transform="rotate(60 10 63)"/>
              </svg>
            </div>
          </div>
          <div class="credential-item">
            <div class="credential-wreath">
              <svg class="wreath wreath-left" viewBox="0 0 30 70" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M25 5 Q5 35 25 65" stroke="#D4A84B" stroke-width="1.5" fill="none"/>
                <ellipse cx="20" cy="8" rx="5" ry="2.5" fill="#D4A84B" transform="rotate(60 20 8)"/>
                <ellipse cx="12" cy="18" rx="5" ry="2.5" fill="#D4A84B" transform="rotate(45 12 18)"/>
                <ellipse cx="8" cy="30" rx="5" ry="2.5" fill="#D4A84B" transform="rotate(20 8 30)"/>
                <ellipse cx="8" cy="42" rx="5" ry="2.5" fill="#D4A84B" transform="rotate(-20 8 42)"/>
                <ellipse cx="12" cy="54" rx="5" ry="2.5" fill="#D4A84B" transform="rotate(-45 12 54)"/>
                <ellipse cx="20" cy="63" rx="5" ry="2.5" fill="#D4A84B" transform="rotate(-60 20 63)"/>
              </svg>
              <div class="credential-content">
                <span class="credential-label">京都工芸繊維大学</span>
                <span class="credential-value">デザイン×建築×AI</span>
              </div>
              <svg class="wreath wreath-right" viewBox="0 0 30 70" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M5 5 Q25 35 5 65" stroke="#D4A84B" stroke-width="1.5" fill="none"/>
                <ellipse cx="10" cy="8" rx="5" ry="2.5" fill="#D4A84B" transform="rotate(-60 10 8)"/>
                <ellipse cx="18" cy="18" rx="5" ry="2.5" fill="#D4A84B" transform="rotate(-45 18 18)"/>
                <ellipse cx="22" cy="30" rx="5" ry="2.5" fill="#D4A84B" transform="rotate(-20 22 30)"/>
                <ellipse cx="22" cy="42" rx="5" ry="2.5" fill="#D4A84B" transform="rotate(20 22 42)"/>
                <ellipse cx="18" cy="54" rx="5" ry="2.5" fill="#D4A84B" transform="rotate(45 18 54)"/>
                <ellipse cx="10" cy="63" rx="5" ry="2.5" fill="#D4A84B" transform="rotate(60 10 63)"/>
              </svg>
            </div>
          </div>
        </div>
      </div>
      <div class="hero-images">
        <img src="images/hero.webp" alt="岩根大純" class="hero-img-main">
      </div>
    </div>
    <!-- 印刷時のみ表示されるQRコード -->
    <div class="print-qr">
      <img src="https://api.qrserver.com/v1/create-qr-code/?size=80x80&data=https://yangentai181-wq.github.io/resume/" alt="QRコード">
      <p>資料はこちらからもご覧いただけます</p>
    </div>
  </section>

  <!-- お知らせ -->
  <section class="news">
    <div class="news-container">
      <h2 class="news-title">お知らせ</h2>
      <div class="news-ticker-wrapper">
        <ul class="news-ticker">
          <li><span class="news-date">2026.02.15</span>AIツールやCADの勉強会を開催しました</li>
          <li><span class="news-date">2026.02.12</span>宅建・一級建築士の勉強が始まりました</li>
          <li><span class="news-date">2026.02.10</span>テクノロジーを活用した重要建築の保存の研究が始まりました</li>
          <li><span class="news-date">2026.01.19</span>先輩の卒業制作のお手伝いが終わりました</li>
          <!-- ループ用に複製 -->
          <li><span class="news-date">2026.02.15</span>AIツールやCADの勉強会を開催しました</li>
          <li><span class="news-date">2026.02.12</span>宅建・一級建築士の勉強が始まりました</li>
          <li><span class="news-date">2026.02.10</span>テクノロジーを活用した重要建築の保存の研究が始まりました</li>
          <li><span class="news-date">2026.01.19</span>先輩の卒業制作のお手伝いが終わりました</li>
        </ul>
        <ul class="news-ticker">
          <li><span class="news-date">2026.01.14</span>松ヶ崎祭実行委員会を引退しました</li>
          <li><span class="news-date">2026.01.02</span>AIの課金額が月一万円を突破しました</li>
          <li><span class="news-date">2025.12.09-10</span>株式会社コスモスイニシアのインターンに参加しました</li>
          <li><span class="news-date">2025.11.22</span>株式会社コスモスイニシアに出会いました</li>
          <!-- ループ用に複製 -->
          <li><span class="news-date">2026.01.14</span>松ヶ崎祭実行委員会を引退しました</li>
          <li><span class="news-date">2026.01.02</span>AIの課金額が月一万円を突破しました</li>
          <li><span class="news-date">2025.12.09-10</span>株式会社コスモスイニシアのインターンに参加しました</li>
          <li><span class="news-date">2025.11.22</span>株式会社コスモスイニシアに出会いました</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- 基本仕様 -->
  <section id="spec" class="section spec">
    <div class="section-container">
      <h2 class="section-title">基本仕様</h2>
      <div class="spec-content">
        <div class="spec-photo">
          <img src="images/profile.png" alt="岩根大純 プロフィール写真">
        </div>
        <div class="spec-info">
          <div class="spec-block">
            <h3 class="spec-subtitle">基本情報</h3>
            <table class="spec-table">
              <tr>
                <th>氏名</th>
                <td>岩根 大純（いわね たいじゅん）</td>
              </tr>
              <tr>
                <th>生年月日</th>
                <td>2004年7月27日（21歳）</td>
              </tr>
              <tr>
                <th>住所</th>
                <td>〒525-0026 滋賀県草津市渋川1丁目2番26-506号 ザ・草津タワー</td>
              </tr>
              <tr>
                <th>電話番号</th>
                <td>070-1423-8403</td>
              </tr>
              <tr>
                <th>メール</th>
                <td>b3161018@kit.edu.ac.jp</td>
              </tr>
            </table>
          </div>

          <div class="spec-block">
            <h3 class="spec-subtitle">学歴</h3>
            <table class="spec-table">
              <tr>
                <th>2020年4月</th>
                <td>滋賀県立草津東高等学校 入学</td>
              </tr>
              <tr>
                <th>2023年3月</th>
                <td>滋賀県立草津東高等学校 卒業</td>
              </tr>
              <tr>
                <th>2023年4月</th>
                <td>京都工芸繊維大学 デザイン・建築学課程 入学</td>
              </tr>
              <tr>
                <th>2027年3月</th>
                <td>京都工芸繊維大学 デザイン・建築学課程 卒業予定</td>
              </tr>
            </table>
          </div>

          <div class="spec-block">
            <h3 class="spec-subtitle">資格・スコア</h3>
            <table class="spec-table">
              <tr>
                <th>2024年9月</th>
                <td>普通自動車第一種免許 取得</td>
              </tr>
              <tr>
                <th>2026年1月</th>
                <td>TOEIC 770点 取得</td>
              </tr>
            </table>
          </div>

          <div class="spec-block">
            <h3 class="spec-subtitle">職歴</h3>
            <table class="spec-table">
              <tr>
                <th>2023年4月〜</th>
                <td>京進の大学受験TOPΣ草津校　アルバイト</td>
              </tr>
              <tr>
                <th>2023年11月〜</th>
                <td>寿司と酒 箔　アルバイト</td>
              </tr>
            </table>
          </div>

          <div class="spec-block">
            <h3 class="spec-subtitle">対応スキル</h3>
            <table class="spec-table">
              <tr>
                <th>CAD</th>
                <td>Archicad</td>
              </tr>
              <tr>
                <th>デザイン</th>
                <td>Illustrator / Photoshop</td>
              </tr>
              <tr>
                <th>プログラミング</th>
                <td>Excel VBA / Python（生成AI活用）</td>
              </tr>
            </table>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- これまでのアップデート -->
  <section id="updates" class="section updates">
    <div class="section-container">
      <h2 class="section-title">これまでのアップデート</h2>
      <div class="timeline">
        <!-- 左カラム -->
        <div class="timeline-column">
          <!-- 幼少期グループ -->
          <div class="timeline-group">
            <div class="timeline-item">
              <div class="timeline-content">
                <span class="timeline-tag">幼少期</span>
                <h3 class="timeline-title">ものづくりで人を笑顔にできる幸せに気づきました。</h3>
                <p class="timeline-desc">とにかくなんでも作って、作ったもので人を喜ばせることが大好きな幼少期を過ごしました。</p>
              </div>
              <div class="timeline-images">
                <div class="timeline-image">
                  <div class="slideshow">
                    <div class="slide active"><img src="images/photo-1-1.jpg" alt="幼少期1"></div>
                    <div class="slide"><img src="images/photo-1-2.jpg" alt="幼少期2"></div>
                    <div class="slide"><img src="images/photo-1-3.jpg" alt="幼少期3"></div>
                    <div class="slideshow-dots">
                      <span class="dot active"></span>
                      <span class="dot"></span>
                      <span class="dot"></span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="timeline-item timeline-no-image">
              <div class="timeline-content">
                <span class="timeline-tag">幼少期・転校</span>
                <h3 class="timeline-title">どこでも馴染める対人力を実装しました。</h3>
                <p class="timeline-desc">転校族として常に「新参者」だった経験が、初対面で懐に入るスキルの基礎になりました。</p>
              </div>
            </div>
          </div>
          <!-- 中学・高校受験グループ -->
          <div class="timeline-group">
            <div class="timeline-item timeline-no-image">
              <div class="timeline-content">
                <span class="timeline-tag">小学校・中学校</span>
                <h3 class="timeline-title">自身の核となるリーダーシップを手に入れました。</h3>
                <p class="timeline-desc">学級委員、部活動のキャプテン...「誰かがやらなきゃ」と自然と手を挙げてきた結果、組織を引っ張る経験をたくさん積むことができました。経験に裏打ちされた調整力や適応力は今の自分の骨格を担っています。</p>
              </div>
            </div>
            <div class="timeline-item timeline-major timeline-no-image">
              <div class="timeline-content">
                <span class="timeline-tag">高校受験</span>
                <span class="major-badge">大規模なアップデート</span>
                <h3 class="timeline-title">余計なプライドを削除。泥臭さを手に入れました。</h3>
                <p class="timeline-desc">「まあ受かるやろ」と高を括っていた高校入試で不合格。人生最大の衝撃でした。肥大化していた根拠のない自信が打ち砕かれ、「プライドを持たないことがプライド」という行動指針を手に入れました。</p>
              </div>
            </div>
          </div>
        </div>
        <!-- 右カラム -->
        <div class="timeline-column">
          <!-- 高校時代グループ -->
          <div class="timeline-group">
            <div class="timeline-item">
              <div class="timeline-content">
                <span class="timeline-tag">高校・学園祭</span>
                <h3 class="timeline-title">チームで大きなものを作れるようになりました。</h3>
                <p class="timeline-desc">自分の描いた絵をチームで実現する経験を積むことができた２回の文化祭。組織で作り上げる建築への憧れを強く抱くようにもなりました。</p>
              </div>
              <div class="timeline-images">
                <div class="timeline-image">
                  <div class="slideshow">
                    <div class="slide active"><img src="images/photo-5-1.jpg" alt="高校学園祭1"></div>
                    <div class="slide"><img src="images/photo-5-2.png" alt="高校学園祭2"></div>
                    <div class="slideshow-dots">
                      <span class="dot active"></span>
                      <span class="dot"></span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="timeline-item">
              <div class="timeline-content">
                <span class="timeline-tag">高校・部活動</span>
                <h3 class="timeline-title">どんな環境でも自分の価値を示せるようになりました。</h3>
                <p class="timeline-desc">レベルの高い環境に飛び込み、挑戦者として闘った三年間。どれだけ負けても腐らず、自分だからこそできることを探し続け、価値を発揮することができるようになりました。その姿勢を評価され、全国選抜の練習パートナーに選出されました。</p>
              </div>
              <div class="timeline-images">
                <div class="timeline-image">
                  <div class="slideshow">
                    <div class="slide active"><img src="images/photo-6.png" alt="高校部活動1"></div>
                    <div class="slide"><img src="images/photo-6-b.jpg" alt="高校部活動2"></div>
                    <div class="slideshow-dots">
                      <span class="dot active"></span>
                      <span class="dot"></span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="timeline-item">
              <div class="timeline-content">
                <span class="timeline-tag">大学受験</span>
                <h3 class="timeline-title">長期スパンの目標達成に対応しました。</h3>
                <p class="timeline-desc">大学一年時に志望校を決め、３年間合格に向けて勉強。ゴールから逆算し、自分に足りないものを考え続けながら努力しました。</p>
              </div>
              <div class="timeline-images">
                <div class="timeline-image">
                  <div class="slideshow">
                    <div class="slide active"><img src="images/photo-7-1.png" alt="大学受験1"></div>
                    <div class="slide"><img src="images/photo-7-2.png" alt="大学受験2"></div>
                    <div class="slide"><img src="images/photo-7-3.png" alt="大学受験3"></div>
                    <div class="slideshow-dots">
                      <span class="dot active"></span>
                      <span class="dot"></span>
                      <span class="dot"></span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- 大学時代グループ -->
          <div class="timeline-group">
            <div class="timeline-item">
              <div class="timeline-content">
                <span class="timeline-tag">大学・学祭実行委員長</span>
                <h3 class="timeline-title">人生を賭けたいワクワクに出会いました。</h3>
                <p class="timeline-desc">自分一人では到達できない目標を、仕組みと熱量で成し遂げたこの経験こそが、私の最大の原動力です。</p>
                <div class="timeline-desc-more" id="gakusai-more">
                  <p class="timeline-desc" style="margin-top:8px;">それは大学祭実行委員長として、カオスだった組織の「理不尽」を解消し、メンバー全員が熱狂できる環境を設計した経験です。当時の組織は、一部のメンバーに負荷が偏り、意欲ある新入生が疎外感を感じるシステム不全（バグ）を起こしていました。私は精神論ではなく、建築学で培った構造的な思考と多様なツールを駆使し、業務の可視化や役割の再定義といった「新しい仕組み」を実装しました。結果として属人性が排除され、誰一人取り残されることなく、チーム全体が有機的に動き出す瞬間を目の当たりにしました。</p>
                </div>
                <button class="timeline-more-btn" onclick="toggleTimeline('gakusai')">続きを読む</button>
              </div>
              <div class="timeline-images">
                <div class="timeline-image">
                  <div class="slideshow">
                    <div class="slide active"><img src="images/photo-8-1.png" alt="大学祭1"></div>
                    <div class="slide"><img src="images/photo-8-2.jpg" alt="大学祭2"></div>
                    <div class="slideshow-dots">
                      <span class="dot active"></span>
                      <span class="dot"></span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="timeline-item">
              <div class="timeline-content">
                <span class="timeline-tag timeline-tag-current">現在</span>
                <h3 class="timeline-title">相棒（AI）を実装中です。</h3>
                <p class="timeline-desc">自分の思考や能力を拡張する存在として、AI技術に猛烈な関心があります。</p>
              </div>
              <div class="timeline-images">
                <div class="timeline-image"><img src="images/hero.webp" alt="現在" style="object-fit:contain;object-position:center;"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 搭載機能 + エンジン -->
  <section id="features" class="section features">
    <div class="section-container">
      <h2 class="section-title">搭載機能</h2>

      <!-- 搭載機能（上部） -->
      <div class="feature-cards">
        <div class="feature-card">
          <div class="feature-slideshow">
            <div class="slide active">
              <div class="feature-photo" style="height:140px;overflow:hidden;"><img src="images/photo-A.jpg" alt="変革リーダーシップ1" style="width:100%;height:100%;object-fit:cover;"></div>
            </div>
            <div class="slide">
              <div class="feature-photo" style="height:140px;overflow:hidden;"><img src="images/photo-A-b.jpg" alt="変革リーダーシップ2" style="width:100%;height:100%;object-fit:cover;"></div>
            </div>
            <div class="slideshow-dots">
              <span class="dot active"></span>
              <span class="dot"></span>
            </div>
          </div>
          <div class="feature-header">
            <div class="feature-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
              </svg>
            </div>
            <h3 class="feature-name">変革リーダーシップ</h3>
          </div>
          <p class="feature-desc">周りを巻き込み、常識を変える先頭に立ちます。</p>
          <p class="feature-note">誰もが見て見ぬふりする理不尽に立ち向かいます。自らが熱源となりチームを活性化させます。</p>
        </div>
        <div class="feature-card">
          <div class="feature-slideshow">
            <div class="slide active">
              <div class="feature-photo" style="display:flex;gap:4px;height:140px;">
                <div style="flex:1;overflow:hidden;"><img src="images/photo-B-1.jpg" alt="泥臭さ1" style="width:100%;height:100%;object-fit:cover;"></div>
                <div style="flex:1;overflow:hidden;"><img src="images/photo-B-2.jpg" alt="泥臭さ2" style="width:100%;height:100%;object-fit:cover;"></div>
              </div>
            </div>
            <div class="slide">
              <div class="feature-photo" style="display:flex;gap:4px;height:140px;">
                <div style="flex:1;overflow:hidden;"><img src="images/photo-B-3.png" alt="泥臭さ3" style="width:100%;height:100%;object-fit:cover;"></div>
                <div style="flex:1;overflow:hidden;"><img src="images/photo-B-4.png" alt="泥臭さ4" style="width:100%;height:100%;object-fit:cover;"></div>
              </div>
            </div>
            <div class="slideshow-dots">
              <span class="dot active"></span>
              <span class="dot"></span>
            </div>
          </div>
          <div class="feature-header">
            <div class="feature-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
              </svg>
            </div>
            <h3 class="feature-name">泥臭さ</h3>
          </div>
          <p class="feature-desc">なりふり構わず、目的を達成します。</p>
          <p class="feature-note">目的達成の邪魔になる余計なプライドは持ち合わせていません。自分の能力を過信することなく、泥臭く目標を達成していきます。</p>
        </div>
        <div class="feature-card">
          <div class="feature-photo"><img src="images/photo-C.jpg" alt="デザイン思考"></div>
          <div class="feature-header">
            <div class="feature-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <circle cx="12" cy="12" r="6"></circle>
                <circle cx="12" cy="12" r="2"></circle>
              </svg>
            </div>
            <h3 class="feature-name">デザイン思考</h3>
          </div>
          <p class="feature-desc">本質を見極め、構造化します。</p>
          <p class="feature-note">「本当に解決すべき課題は何か？」を執拗に問い続けます。「なんとなく」を排除し、美しさと合理性が共存する地点まで思考を深めます。</p>
        </div>
        <div class="feature-card">
          <div class="feature-slideshow">
            <div class="slide active">
              <div class="feature-photo" style="height:140px;overflow:hidden;"><img src="images/photo-D.png" alt="クラフトマンシップ1" style="width:100%;height:100%;object-fit:cover;"></div>
            </div>
            <div class="slide">
              <div class="feature-photo" style="height:140px;overflow:hidden;"><img src="images/photo-D-b.png" alt="クラフトマンシップ2" style="width:100%;height:100%;object-fit:cover;"></div>
            </div>
            <div class="slideshow-dots">
              <span class="dot active"></span>
              <span class="dot"></span>
            </div>
          </div>
          <div class="feature-header">
            <div class="feature-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>
              </svg>
            </div>
            <h3 class="feature-name">クラフトマンシップ</h3>
          </div>
          <p class="feature-desc">細部までこだわり抜いたものづくりができます。</p>
          <p class="feature-note">生み出すからには少しでもより良いものを、の精神を忘れたことはありません。</p>
        </div>
      </div>

      <!-- エンジン（下部中央） -->
      <div class="engine">
        <h3 class="engine-title">エンジン</h3>
        <p class="engine-intro">これらのエンジンが、搭載機能を動かしています。</p>
        <div class="engine-items">
          <div class="engine-item">
            <h4 class="engine-name">正義感</h4>
            <p class="engine-desc">正直者がバカを見る世界に強いモヤモヤを感じます。理不尽の解消は価値の創造に直結すると考えます。</p>
          </div>
          <div class="engine-item">
            <h4 class="engine-name">承認欲求</h4>
            <p class="engine-desc">人に喜んでもらうために、相手の気持ちをたくさん考えてきた人生です。</p>
          </div>
          <div class="engine-item">
            <h4 class="engine-name">情熱</h4>
            <p class="engine-desc">やると決めたことにやけどしそうな熱量を注ぎ込むことができます。</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 評価とレビュー -->
  <section id="reviews" class="section reviews">
    <div class="section-container">
      <h2 class="section-title">評価とレビュー</h2>
      <div class="reviews-unified">
        <!-- リーダーシップ -->
        <div class="review-block">
          <div class="review-header">
            <h3 class="review-block-title">リーダーシップ</h3>
            <div class="review-rating">
              <div class="rating-stars">
                <span class="star filled">★</span>
                <span class="star filled">★</span>
                <span class="star filled">★</span>
                <span class="star filled">★</span>
                <span class="star filled">★</span>
              </div>
              <span class="rating-score">4.9</span>
            </div>
          </div>
          <p class="review-analysis">頼れる存在として見られています</p>
          <div class="review-comments">
            <div class="review-item">
              <p class="review-text">「ベンチに岩根さんがいるだけで安心感がすごかったです。」</p>
              <p class="review-author">— 高校卓球部・後輩</p>
            </div>
            <div class="review-item">
              <p class="review-text">「岩根くんがそういうなら自分たちも着いていこうと思える」</p>
              <p class="review-author">— 大学祭実行委員・同期</p>
            </div>
          </div>
          <div class="review-comments-hidden" id="leadership-more">
            <div class="review-item">
              <p class="review-text">「10年間キャプテンをしてもらいたかったけどね！！」</p>
              <p class="review-author">— 高校卓球部・コーチ</p>
            </div>
            <div class="review-item">
              <p class="review-text">「困り事があっても委員長が呼べばなんとかなる！と感じさせるようなすごく頼もしい委員長だと感じていました。」</p>
              <p class="review-author">— 大学祭実行委員・同期</p>
            </div>
            <div class="review-item">
              <p class="review-text">「大純のリーダーシップのすばらしさを頼りに経営してきました！！ 周りをみる力、みんなを引っ張る力、すばらしい武器をもっています！」</p>
              <p class="review-author">— 中学校・担任</p>
            </div>
          </div>
          <button class="review-more-btn" onclick="toggleReviews('leadership')">もっと見る</button>
        </div>

        <!-- 対人力 -->
        <div class="review-block">
          <div class="review-header">
            <h3 class="review-block-title">対人力</h3>
            <div class="review-rating">
              <div class="rating-stars">
                <span class="star filled">★</span>
                <span class="star filled">★</span>
                <span class="star filled">★</span>
                <span class="star filled">★</span>
                <span class="star half">★</span>
              </div>
              <span class="rating-score">4.5</span>
            </div>
          </div>
          <p class="review-analysis">場を和ませ、気配りができる存在として見られています</p>
          <div class="review-comments">
            <div class="review-item">
              <p class="review-text">「いつも太陽みたいな笑顔でお話ししてくれたこと、めちゃくちゃ心強かったです。」</p>
              <p class="review-author">— 大学祭実行委員・後輩</p>
            </div>
            <div class="review-item">
              <p class="review-text">「松ヶ崎祭初心者で、右も左もわからなかった1回生にも、沢山仕事をふってくださって、自分も委員会の一員なんだと実感することができました！」</p>
              <p class="review-author">— 大学祭実行委員・後輩</p>
            </div>
          </div>
          <div class="review-comments-hidden" id="interpersonal-more">
            <div class="review-item">
              <p class="review-text">「マイナスな感情を一切見せない立ち回りとかも凄すぎて、尊敬するところばかりです。」</p>
              <p class="review-author">— 大学祭実行委員・後輩</p>
            </div>
            <div class="review-item">
              <p class="review-text">「途中から入ったややこしい身ですが、こんな僕たちにもお仕事振っていただいてとても嬉しかったです。」</p>
              <p class="review-author">— 大学祭実行委員・同期</p>
            </div>
          </div>
          <button class="review-more-btn" onclick="toggleReviews('interpersonal')">もっと見る</button>
        </div>

        <!-- 実行力 -->
        <div class="review-block">
          <div class="review-header">
            <h3 class="review-block-title">実行力</h3>
            <div class="review-rating">
              <div class="rating-stars">
                <span class="star filled">★</span>
                <span class="star filled">★</span>
                <span class="star filled">★</span>
                <span class="star filled">★</span>
                <span class="star half">★</span>
              </div>
              <span class="rating-score">4.7</span>
            </div>
          </div>
          <p class="review-analysis">行動で成果を出す人として見られています</p>
          <div class="review-comments">
            <div class="review-item">
              <p class="review-text">「私のお仕事、なんか全部大純さんがお手伝いしてくれてて、200%くらい完成度があがってました。」</p>
              <p class="review-author">— 大学祭実行委員・後輩</p>
            </div>
            <div class="review-item">
              <p class="review-text">「出来る事だったら何でもやる！という精神が岩根さんにしか出来ない事」</p>
              <p class="review-author">— 大学祭実行委員・同期</p>
            </div>
          </div>
          <div class="review-comments-hidden" id="execution-more">
            <div class="review-item">
              <p class="review-text">「なんでもできる大純さんには尊敬せざるを得ませんでした。」</p>
              <p class="review-author">— 大学祭実行委員・後輩</p>
            </div>
          </div>
          <button class="review-more-btn" onclick="toggleReviews('execution')">もっと見る</button>
        </div>

        <!-- セルフマネジメント -->
        <div class="review-block">
          <div class="review-header">
            <h3 class="review-block-title">セルフマネジメント</h3>
            <div class="review-rating">
              <div class="rating-stars">
                <span class="star filled">★</span>
                <span class="star filled">★</span>
                <span class="star half">★</span>
                <span class="star empty">★</span>
                <span class="star empty">★</span>
              </div>
              <span class="rating-score">2.5</span>
            </div>
          </div>
          <p class="review-analysis">情熱でオーバーヒートしない自分との向き合い方が課題です。自分で全部できることが正義なのか、大きな視野を持って考える力を身につけつつあります。</p>
          <div class="review-comments">
            <div class="review-item">
              <p class="review-text">「一人で抱えがち」</p>
              <p class="review-author">— 大学祭実行委員・同期</p>
            </div>
            <div class="review-item">
              <p class="review-text">「自分が無理することを計画に入れてしまう」</p>
              <p class="review-author">— 大学祭実行委員・同期</p>
            </div>
          </div>
          <div class="review-comments-hidden" id="selfmanagement-more">
            <div class="review-item">
              <p class="review-text">「きっと一番大変なのに、マイナスな感情を一切見せない」</p>
              <p class="review-author">— 大学祭実行委員・同期</p>
            </div>
            <div class="review-item">
              <p class="review-text">「たとえ自分に用事があっても、何でも手伝ってくれる」</p>
              <p class="review-author">— 小学校時代の友人</p>
            </div>
          </div>
          <button class="review-more-btn" onclick="toggleReviews('selfmanagement')">もっと見る</button>
        </div>
      </div>
    </div>
  </section>

  <!-- 岩根大純のNext Good -->
  <section id="next-good" class="section next-good">
    <div class="section-container">
      <h2 class="section-title">岩根大純のNext Good</h2>

      <div class="next-good-content">
        <div class="ultimate-goal">
          <h3>最終目標</h3>
          <p class="goal-text">正直者が報われるチームを、この手で経営する。</p>
        </div>

        <div class="step-item skills-progress">
          <h3 class="step-title">目標に向けて磨いていく力</h3>
          <div class="skills-grid">
            <div class="skill-progress-item">
              <div class="skill-header">
                <span class="skill-name">デザイン力・設計力</span>
              </div>
              <div class="progress-bar">
                <div class="progress-current" style="width: 70%;"></div>
              </div>
              <p class="skill-note">建物の設計デザインにとどまらず、幅広い分野に通ずる設計力とデザイン力に磨きをかけていきます。</p>
            </div>
            <div class="skill-progress-item">
              <div class="skill-header">
                <span class="skill-name">言語化力・構造化力</span>
              </div>
              <div class="progress-bar">
                <div class="progress-current" style="width: 90%;"></div>
              </div>
              <p class="skill-note">課題の本質を突き止め、チームで解決していくために、この力は不可欠だと考えます。なんとなくではなく、論理的に物事を考える習慣を継続していきます。</p>
            </div>
            <div class="skill-progress-item">
              <div class="skill-header">
                <span class="skill-name">やり切る力</span>
              </div>
              <div class="progress-bar">
                <div class="progress-current" style="width: 60%;"></div>
              </div>
              <p class="skill-note">実行委員長経験で培った完遂力をさらに磨いていきます</p>
            </div>
            <div class="skill-progress-item">
              <div class="skill-header">
                <span class="skill-name">セルフマネジメント</span>
              </div>
              <div class="progress-bar">
                <div class="progress-current" style="width: 30%;"></div>
              </div>
              <p class="skill-note">目先のありがとうのために、つい自分を犠牲にしてしまうことがあります。一歩引いて冷静になる。抱え込まず人に頼る。自分のことを大切にする。これらを明確な課題と捉えて意識して取り組んでいます。</p>
            </div>
          </div>
        </div>

        <div class="step-item">
          <h3 class="step-title">求める環境</h3>
          <div class="requirement-cards">
            <div class="requirement-card">
              <h4>自分の頭で考えながら働ける環境</h4>
              <p>常に自分の頭で考え、これまでの当たり前を疑うことが求められる環境で挑戦したいと考えます。</p>
            </div>
            <div class="requirement-card">
              <h4>積極的な挑戦が受け入れられる環境</h4>
              <p>できることよりも、できたらワクワクすることに熱量を注ぎ込みたいと考えます。</p>
            </div>
            <div class="requirement-card">
              <h4>マルチスキルが発揮できる環境</h4>
              <p>一つの職能に拘らず、自分の持てる全てを総動員して仕事ができる環境に身を置きたいと考えています。</p>
            </div>
          </div>
        </div>

        <div class="step-item">
          <h3 class="step-title">なぜコスモスイニシアか</h3>
          <p class="step-text">当たり前を疑い、自らの頭で仕組みを再構築することが自分の原動力です。コスモスイニシアの「MIMARU」に象徴される業界への問いかけ、インターンで触れた「自分だからできる仕事」を大切にする社員の方々の姿勢は、まさにその価値観の体現でした。与えられた正解をなぞるのではなく、Next Goodを自ら設計できる環境がここにあると確信しています。</p>
        </div>
      </div>
    </div>
  </section>

  <!-- AIチャットボット -->
  <section id="chatbot" class="section chatbot-section">
    <div class="section-container">
      <div class="chatbot-header">
        <div class="chatbot-header-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="20" height="20"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg>
        </div>
        <div>
          <h2 class="chatbot-title">大純AIに聞く</h2>
          <p class="chatbot-subtitle">自己分析データ・活動実績・他者評価をもとにAIが回答します</p>
        </div>
      </div>

      <div class="chatbot-wrapper">
        <!-- 左：サジェスト -->
        <div class="chatbot-suggest-panel">
          <p class="suggest-label">よくある質問</p>
          <div class="suggest-chips">
            <button class="suggest-chip" onclick="askSuggest(this)">あなたを突き動かす原体験は何ですか？</button>
            <button class="suggest-chip" onclick="askSuggest(this)">これまでで一番悔しかった経験を教えてください。</button>
            <button class="suggest-chip" onclick="askSuggest(this)">組織の「理不尽」に向き合った具体的な体験は？</button>
            <button class="suggest-chip" onclick="askSuggest(this)">周りから意外だと言われることはありますか？</button>
            <button class="suggest-chip" onclick="askSuggest(this)">失敗から何を学びましたか？</button>
            <button class="suggest-chip" onclick="askSuggest(this)">仕事で絶対に譲れない価値観は何ですか？</button>
          </div>
        </div>

        <!-- 右：チャット -->
        <div class="chatbot-container">
          <div class="chat-history" id="chatHistory">
            <div class="chat-message bot">
              <div class="chat-avatar"><img src="images/hero.webp" alt="AI"></div>
              <div class="chat-bubble">ご覧いただきありがとうございます。この履歴書では伝えきれていない部分があります。気になることがあれば、何でも聞いてください。</div>
            </div>
          </div>
          <div class="chat-input-wrapper">
            <div class="chat-input-area">
              <textarea class="chat-input" id="chatInput" placeholder="岩根大純について質問する..." rows="1"></textarea>
              <div class="chat-send-wrap">
                <button class="chat-send-btn" id="chatSendBtn" onclick="sendMessage()">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" width="16" height="16"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
                </button>
                <span class="chat-send-label">Shift+Enter</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- フローティングチャット -->
  <div class="float-tab" id="floatTab" onclick="toggleFloatChat()">
    <img src="images/hero.webp" alt="大純AI" class="float-tab-icon">
    <span>大</span><span>純</span><span class="float-tab-ai">AI</span><span>に</span><span>聞</span><span>く</span>
  </div>

  <div class="float-panel" id="floatPanel">
    <div class="float-panel-header">
      <div class="float-panel-title">
        <img src="images/hero.webp" alt="大純AI" class="float-avatar">
        <div>
          <div class="float-panel-name">大純AIに聞く</div>
          <div class="float-panel-sub">履歴書の補足にどうぞ</div>
        </div>
      </div>
      <button class="float-close-btn" onclick="toggleFloatChat()">✕</button>
    </div>
    <div class="float-chat-history" id="floatChatHistory">
      <div class="chat-message bot">
        <div class="chat-avatar"><img src="images/hero.webp" alt="AI"></div>
        <div class="chat-bubble">この履歴書では伝えきれていない部分があります。気になることがあれば、何でも聞いてください。</div>
      </div>
    </div>
    <div class="float-suggest-row" id="floatSuggests">
      <button class="float-suggest-chip" onclick="floatAskSuggest(this)">原体験は？</button>
      <button class="float-suggest-chip" onclick="floatAskSuggest(this)">最大の失敗は？</button>
      <button class="float-suggest-chip" onclick="floatAskSuggest(this)">譲れない価値観は？</button>
    </div>
    <div class="chat-input-wrapper" style="border-radius:0;">
      <div class="chat-input-area">
        <textarea class="chat-input" id="floatChatInput" placeholder="質問する..." rows="1"></textarea>
        <div class="chat-send-wrap">
          <button class="chat-send-btn" id="floatChatSendBtn" onclick="floatSendMessage()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" width="16" height="16"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
          </button>
          <span class="chat-send-label">Shift+Enter</span>
        </div>
      </div>
    </div>
  </div>

  <!-- フッター -->
  <footer class="footer">
    <div class="footer-content">
      <button class="pdf-btn" onclick="window.print()">PDFをダウンロード<svg class="download-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg></button>
      <p class="footer-copy">&copy; 2026 岩根大純</p>
    </div>
  </footer>

  <script>
    // スライドショー
    function initSlideshows() {
      document.querySelectorAll('.slideshow, .feature-slideshow').forEach(function(slideshow) {
        const slides = slideshow.querySelectorAll('.slide');
        const dots = slideshow.querySelectorAll('.dot');
        if (slides.length < 2) return;
        let current = 0;
        setInterval(function() {
          slides[current].classList.remove('active');
          dots[current].classList.remove('active');
          current = (current + 1) % slides.length;
          slides[current].classList.add('active');
          dots[current].classList.add('active');
        }, 3000);
      });
    }
    initSlideshows();

    function toggleTimeline(id) {
      const element = document.getElementById(id + '-more');
      const btn = event.target;
      if (element.classList.contains('show')) {
        element.classList.remove('show');
        btn.textContent = '続きを読む';
      } else {
        element.classList.add('show');
        btn.textContent = '閉じる';
      }
    }

    function toggleReviews(category) {
      const element = document.getElementById(category + '-more');
      const btn = event.target;
      if (element.classList.contains('show')) {
        element.classList.remove('show');
        btn.textContent = 'もっと見る';
      } else {
        element.classList.add('show');
        btn.textContent = '閉じる';
      }
    }

    function toggleMenu() {
      const menu = document.getElementById('mobileMenu');
      const hamburger = document.querySelector('.hamburger');
      menu.classList.toggle('open');
      hamburger.classList.toggle('open');
    }

    function closeMenu() {
      const menu = document.getElementById('mobileMenu');
      const hamburger = document.querySelector('.hamburger');
      menu.classList.remove('open');
      hamburger.classList.remove('open');
    }
  </script>
  <script src="db.js"></script>
  <script>
    const GEMINI_API_KEY = 'AIzaSyBeQOrzaz1Upgo5fzs_CVBo02w76uPH9b4';
    const GEMINI_API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=' + GEMINI_API_KEY;

    const SYSTEM_PROMPT = `あなたは岩根大純（いわねたいじゅん）のポートフォリオサイトに搭載されたAIアシスタントです。
採用担当者や面接官からの質問に、以下の自己分析データを元に回答してください。

【回答ルール】
- 丁寧な日本語で、簡潔かつ具体的に回答する
- データにない情報は「その情報は持ち合わせていません」と答える
- 岩根大純の強みや経験を前向きに伝える
- 回答は3〜5文程度を目安にする
- データベースに登場する岩根大純以外の個人名（友人・家族・教員・委員会メンバー等）は一切出さない。人物を指す場合は「後輩」「同期」「先生」などの関係性のみで表現する

【岩根大純のデータベース】
${JIBUN_DB}`;

    const chatHistory = [];

    function appendMessage(role, text) {
      const history = document.getElementById('chatHistory');
      const div = document.createElement('div');
      div.className = 'chat-message ' + (role === 'user' ? 'user' : 'bot');
      if (role === 'bot') {
        const avatar = document.createElement('div');
        avatar.className = 'chat-avatar';
        avatar.innerHTML = '<img src="images/hero.webp" alt="AI">';
        div.appendChild(avatar);
      }
      const bubble = document.createElement('div');
      bubble.className = 'chat-bubble';
      bubble.textContent = text;
      div.appendChild(bubble);
      history.appendChild(div);
      history.scrollTop = history.scrollHeight;
      return bubble;
    }

    function showTyping() {
      const history = document.getElementById('chatHistory');
      const div = document.createElement('div');
      div.className = 'chat-message bot';
      div.id = 'typingIndicator';
      const avatar = document.createElement('div');
      avatar.className = 'chat-avatar';
      avatar.textContent = 'AI';
      div.appendChild(avatar);
      const bubble = document.createElement('div');
      bubble.className = 'chat-bubble typing-bubble';
      bubble.innerHTML = '<span class="typing-dot"></span><span class="typing-dot"></span><span class="typing-dot"></span>';
      div.appendChild(bubble);
      history.appendChild(div);
      history.scrollTop = history.scrollHeight;
    }

    function hideTyping() {
      const el = document.getElementById('typingIndicator');
      if (el) el.remove();
    }

    function setLoading(isLoading) {
      const btn = document.getElementById('chatSendBtn');
      const input = document.getElementById('chatInput');
      btn.disabled = isLoading;
      input.disabled = isLoading;
    }

    function askSuggest(btn) {
      const text = btn.textContent;
      document.getElementById('chatInput').value = text;
      sendMessage();
    }

    async function sendMessage() {
      const input = document.getElementById('chatInput');
      const text = input.value.trim();
      if (!text) return;
      input.value = '';

      appendMessage('user', text);
      chatHistory.push({ role: 'user', parts: [{ text }] });
      setLoading(true);
      showTyping();

      const body = {
        system_instruction: { parts: [{ text: SYSTEM_PROMPT }] },
        contents: chatHistory
      };

      const callAPI = async (retryCount) => {
        const res = await fetch(GEMINI_API_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(body)
        });
        const data = await res.json();

        if (res.status === 429 && retryCount > 0) {
          hideTyping();
          const waitSec = 15;
          const waitMsg = appendMessage('bot', `リクエストが混み合っています。${waitSec}秒後に自動で再送します...`);
          await new Promise(r => setTimeout(r, waitSec * 1000));
          waitMsg.closest('.chat-message').remove();
          showTyping();
          return callAPI(retryCount - 1);
        }

        hideTyping();
        if (!res.ok) {
          appendMessage('bot', 'APIエラー: ' + (data.error?.message || JSON.stringify(data)));
          return;
        }
        const reply = data.candidates?.[0]?.content?.parts?.[0]?.text || '回答を取得できませんでした。';
        appendMessage('bot', reply);
        chatHistory.push({ role: 'model', parts: [{ text: reply }] });
      };

      try {
        await callAPI(2);
      } catch (e) {
        hideTyping();
        appendMessage('bot', '通信エラー: ' + e.message);
      } finally {
        setLoading(false);
      }
    }

    // フローティングチャット
    const floatHistory = [];

    function toggleFloatChat() {
      document.getElementById('floatPanel').classList.toggle('open');
      document.getElementById('floatTab').classList.toggle('hidden');
    }

    function floatAppendMessage(role, text) {
      const history = document.getElementById('floatChatHistory');
      const div = document.createElement('div');
      div.className = 'chat-message ' + (role === 'user' ? 'user' : 'bot');
      if (role === 'bot') {
        const av = document.createElement('div');
        av.className = 'chat-avatar';
        av.innerHTML = '<img src="images/hero.webp" alt="AI">';
        div.appendChild(av);
      }
      const bubble = document.createElement('div');
      bubble.className = 'chat-bubble';
      bubble.textContent = text;
      div.appendChild(bubble);
      history.appendChild(div);
      history.scrollTop = history.scrollHeight;
    }

    function floatShowTyping() {
      const history = document.getElementById('floatChatHistory');
      const div = document.createElement('div');
      div.className = 'chat-message bot'; div.id = 'floatTyping';
      const av = document.createElement('div'); av.className = 'chat-avatar';
      av.innerHTML = '<img src="images/hero.webp" alt="AI">'; div.appendChild(av);
      const b = document.createElement('div'); b.className = 'chat-bubble typing-bubble';
      b.innerHTML = '<span class="typing-dot"></span><span class="typing-dot"></span><span class="typing-dot"></span>';
      div.appendChild(b); history.appendChild(div); history.scrollTop = history.scrollHeight;
    }

    function floatHideTyping() { const el = document.getElementById('floatTyping'); if (el) el.remove(); }
    function floatSetLoading(v) { document.getElementById('floatChatSendBtn').disabled = v; document.getElementById('floatChatInput').disabled = v; }

    function floatAskSuggest(btn) {
      const map = { '原体験は？': 'あなたを突き動かす原体験は何ですか？', '最大の失敗は？': 'これまでで一番悔しかった経験を教えてください。', '譲れない価値観は？': '仕事で絶対に譲れない価値観は何ですか？' };
      document.getElementById('floatChatInput').value = map[btn.textContent] || btn.textContent;
      document.getElementById('floatSuggests').style.display = 'none';
      floatSendMessage();
    }

    async function floatSendMessage() {
      const input = document.getElementById('floatChatInput');
      const text = input.value.trim(); if (!text) return;
      input.value = ''; input.style.height = 'auto';
      floatAppendMessage('user', text);
      floatHistory.push({ role: 'user', parts: [{ text }] });
      floatSetLoading(true); floatShowTyping();
      const body = { system_instruction: { parts: [{ text: SYSTEM_PROMPT }] }, contents: floatHistory };
      const callAPI = async (retry) => {
        const res = await fetch(GEMINI_API_URL, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(body) });
        const data = await res.json();
        if (res.status === 429 && retry > 0) { floatHideTyping(); floatAppendMessage('bot', '15秒後に再送します...'); await new Promise(r => setTimeout(r, 15000)); floatShowTyping(); return callAPI(retry - 1); }
        floatHideTyping();
        if (!res.ok) { floatAppendMessage('bot', 'エラー: ' + (data.error?.message || '')); return; }
        const reply = data.candidates?.[0]?.content?.parts?.[0]?.text || '回答を取得できませんでした。';
        floatAppendMessage('bot', reply);
        floatHistory.push({ role: 'model', parts: [{ text: reply }] });
      };
      try { await callAPI(2); } catch(e) { floatHideTyping(); floatAppendMessage('bot', '通信エラー'); } finally { floatSetLoading(false); }
    }

    document.getElementById('floatChatInput').addEventListener('keydown', function(e) {
      if (e.key === 'Enter' && e.shiftKey) { e.preventDefault(); floatSendMessage(); }
    });
    document.getElementById('floatChatInput').addEventListener('input', function() {
      this.style.height = 'auto'; this.style.height = Math.min(this.scrollHeight, 100) + 'px';
    });

    const chatInput = document.getElementById('chatInput');
    chatInput.addEventListener('keydown', function(e) {
      if (e.key === 'Enter' && e.shiftKey) {
        e.preventDefault();
        sendMessage();
      }
    });
    chatInput.addEventListener('input', function() {
      this.style.height = 'auto';
      this.style.height = Math.min(this.scrollHeight, 120) + 'px';
    });
  </script>
</body>
</html>
